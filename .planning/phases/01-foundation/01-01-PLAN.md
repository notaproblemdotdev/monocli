---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/monocli/__init__.py
  - src/monocli/py.typed
  - tests/__init__.py
  - tests/conftest.py
autonomous: true
must_haves:
  truths:
    - Project uses UV for dependency management
    - Ruff handles all linting and formatting
    - MyPy enforces static type checking
    - pytest runs tests with coverage
    - Code follows src/ layout with proper package structure
  artifacts:
    - path: pyproject.toml
      provides: "Project configuration with UV, Ruff, MyPy, pytest settings"
      contains: "[build-system], [project], [tool.ruff], [tool.mypy], [tool.pytest.ini_options]"
    - path: src/monocli/__init__.py
      provides: "Package root with version"
      exports: ["__version__"]
    - path: src/monocli/py.typed
      provides: "PEP 561 type marker"
      min_bytes: 0
    - path: tests/conftest.py
      provides: "pytest fixtures and configuration"
      min_lines: 10
  key_links:
    - from: pyproject.toml
      to: src/monocli
      via: "package discovery"
      pattern: "name = \"monocli\""
---

<objective>
Initialize a Python 3.13 project with UV, Ruff, MyPy, and pytest configured for modern development. Establish src/ layout structure with proper package discovery and type checking markers.

Purpose: Provide the foundational tooling infrastructure for all subsequent development work.
Output: Fully configured Python project ready for dependency installation and development.
</objective>

<execution_context>
@/Users/pg/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

## Decisions to Honor
- Python 3.13 target
- UV for package management
- Ruff for linting/formatting
- MyPy for type checking
- pytest for testing
</context>

<tasks>

<task type="auto">
  <name>Initialize UV project with src layout</name>
  <files>pyproject.toml, src/monocli/__init__.py</files>
  <action>
Run `uv init --package --python 3.13` to create a new Python project. If uv init creates a flat layout, restructure to src/monocli/ layout by:
1. Creating src/monocli/ directory
2. Moving source files from monocli/ to src/monocli/
3. Updating pyproject.toml [project] name = "monocli" and adding [tool.setuptools.packages.find] where = ["src"]

Add to pyproject.toml [project] section:
- requires-python = ">=3.13"
- dependencies = ["textual>=7.5.0", "pydantic>=2.12.5"]

Add [project.optional-dependencies] dev = ["pytest>=8.0", "pytest-asyncio>=0.23", "pytest-cov>=5.0"]

Create src/monocli/__init__.py with `__version__ = "0.1.0"`
  </action>
  <verify>
    - `uv --version` returns version
    - `cat pyproject.toml | grep "name ="` shows monocli
    - `ls src/monocli/__init__.py` exists
    - `cat src/monocli/__init__.py | grep "__version__"` returns version
  </verify>
  <done>
    UV project initialized with src layout, Python 3.13 requirement, and basic dependencies declared
  </done>
</task>

<task type="auto">
  <name>Configure Ruff for linting and formatting</name>
  <files>pyproject.toml</files>
  <action>
Add Ruff configuration to pyproject.toml under [tool.ruff]:

```toml
[tool.ruff]
target-version = "py313"
line-length = 100
select = [
    "E",   # pycodestyle errors
    "F",   # Pyflakes
    "I",   # isort
    "N",   # pep8-naming
    "W",   # pycodestyle warnings
    "UP",  # pyupgrade
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "SIM", # flake8-simplify
]
ignore = ["E501"]  # Line too long (handled by formatter)

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.ruff.lint.pydocstyle]
convention = "google"
```
  </action>
  <verify>
    - `cat pyproject.toml | grep "\[tool.ruff\]"` exists
    - `cat pyproject.toml | grep "target-version"` shows py313
    - `uv run ruff --version` works after sync
  </verify>
  <done>
    Ruff configured with Python 3.13 target, 100 char line length, and comprehensive lint rules
  </done>
</task>

<task type="auto">
  <name>Configure MyPy and pytest</name>
  <files>pyproject.toml, src/monocli/py.typed, tests/conftest.py</files>
  <action>
Add MyPy configuration to pyproject.toml:

```toml
[tool.mypy]
python_version = "3.13"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
ignore_missing_imports = true
strict_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
show_error_codes = true
```

Add pytest configuration to pyproject.toml:

```toml
[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
addopts = "-v --cov=src/monocli --cov-report=term-missing"
```

Create src/monocli/py.typed (empty file for PEP 561 compliance).

Create tests/conftest.py with pytest-asyncio fixtures:

```python
"""pytest fixtures and configuration."""
import pytest


@pytest.fixture
def event_loop_policy():
    """Return event loop policy for async tests."""
    import asyncio
    return asyncio.get_event_loop_policy()
```
  </action>
  <verify>
    - `cat pyproject.toml | grep "\[tool.mypy\]"` exists
    - `cat pyproject.toml | grep "\[tool.pytest.ini_options\]"` exists
    - `ls src/monocli/py.typed` exists
    - `ls tests/conftest.py` exists
    - `uv sync` completes without errors
  </verify>
  <done>
    MyPy configured with strict type checking, pytest with asyncio mode, py.typed marker present, tests/ directory ready
  </done>
</task>

</tasks>

<verification>
- [ ] `uv sync` installs all dependencies
- [ ] `uv run ruff check src/` passes with no errors
- [ ] `uv run mypy src/monocli` passes type checking
- [ ] `uv run pytest` runs (0 tests collected is ok at this stage)
- [ ] Package is importable: `uv run python -c "import monocli; print(monocli.__version__)"` works
</verification>

<success_criteria>
1. Project uses UV for package management (pyproject.toml present, uv.lock generated)
2. Ruff lints and formats code (ruff check/format commands work)
3. MyPy enforces type safety (mypy command passes on package)
4. pytest runs tests (test discovery works, asyncio mode active)
5. src/ layout is correctly configured (package importable)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
